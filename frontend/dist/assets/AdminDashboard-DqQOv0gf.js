import{d as ke,b as je,r as l,a as n,j as e}from"./index-Cxo_6xcX.js";const c="/api",T=["WINDOWS","LINUX","MACOS","BSD","OTHER"],fe=["X64","X86","ARM64","ARM","RISCV64","UNIVERSAL"],Ne=["en","en-US","en-GB","de","fr","es","it","pt","ru","ja","ko","zh-CN"],we=["sha256","sha512","md5","sha1"],ve="access_token";function _e(){var E;const{user:x,logout:z}=ke(),L=je(),[h,B]=l.useState("overview"),[,R]=l.useState(!0);l.useEffect(()=>{x&&!x.password_changed&&L("/admin/change-password",{replace:!0})},[x,L]);const[v,H]=l.useState(null),[y,G]=l.useState(null),[m,X]=l.useState(null),[S,P]=l.useState([]),[q,U]=l.useState(!1),[_,K]=l.useState([]),[V,F]=l.useState(!1),[N,W]=l.useState(null),[Y,p]=l.useState(!1),[k,C]=l.useState(null),[s,g]=l.useState({name:"",version:"",category:"LINUX",architecture:"X64",language:"en",url:"",size:0,description:"",icon:"",checksum:"",checksum_type:"sha256"}),[I,J]=l.useState([]),[Q,M]=l.useState(!1),[Z,ee]=l.useState(null),[te,D]=l.useState(!1),[d,u]=l.useState({site_name:"ISO Toolkit",site_description:"Multi-OS ISO Downloader Toolkit",allow_registration:!0,max_download_size_gb:100,download_timeout_seconds:3600,maintenance_mode:!1}),i=()=>({headers:{Authorization:`Bearer ${localStorage.getItem(ve)}`}});l.useEffect(()=>{ae()},[]);const ae=async()=>{await Promise.all([re(),se(),de()]),R(!1)},re=async()=>{try{const t=await n.get(`${c}/analytics/detailed`,i());H(t.data)}catch(t){console.error("Failed to fetch analytics:",t)}},se=async()=>{try{const t=await n.get(`${c}/analytics/system-health`,i());G(t.data)}catch(t){console.error("Failed to fetch system health:",t)}},de=async()=>{try{const t=await n.get(`${c}/admin/dashboard`,i());X(t.data)}catch(t){console.error("Failed to fetch dashboard overview:",t)}},w=async()=>{U(!0);try{const t=await n.get(`${c}/auth/admin/users`,i());P(t.data)}catch(t){console.error("Failed to fetch users:",t)}finally{U(!1)}},le=async t=>{var a,r;try{await n.post(`${c}/auth/admin/users/${t}/toggle-admin`,{},i()),await w()}catch(o){alert(((r=(a=o.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to toggle admin status")}},ie=async(t,a)=>{var r,o;if(confirm(`Are you sure you want to delete user "${a}"?`))try{await n.delete(`${c}/auth/admin/users/${t}`,i()),await w()}catch(be){alert(((o=(r=be.response)==null?void 0:r.data)==null?void 0:o.detail)||"Failed to delete user")}},ne=async t=>{var a,r;try{await n.post(`${c}/auth/register`,t,i()),await w(),alert("User created successfully!")}catch(o){alert(((r=(a=o.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to create user")}},b=async t=>{F(!0);try{const a=await n.get(`${c}/admin/iso${t?`?category=${t}`:""}`,i());K(a.data)}catch(a){console.error("Failed to fetch ISOs:",a)}finally{F(!1)}},O=async()=>{try{const t=await n.get(`${c}/admin/iso/stats`,i());W(t.data)}catch(t){console.error("Failed to fetch ISO stats:",t)}},ce=async()=>{var t,a;try{await n.post(`${c}/admin/iso`,s,i()),p(!1),j(),await b(),await O(),alert("ISO created successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to create ISO")}},oe=async()=>{var t,a;if(k)try{await n.put(`${c}/admin/iso/${k.id}`,s,i()),p(!1),C(null),j(),await b(),alert("ISO updated successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to update ISO")}},xe=async t=>{var a,r;if(confirm("Are you sure you want to delete this ISO?"))try{await n.delete(`${c}/admin/iso/${t}`,i()),await b(),await O(),alert("ISO deleted successfully!")}catch(o){alert(((r=(a=o.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to delete ISO")}},ge=t=>{C(t),g({name:t.name,version:t.version,category:t.category,architecture:t.architecture,language:t.language,url:t.url,size:t.size,description:t.description,icon:t.icon,checksum:t.checksum,checksum_type:t.checksum_type}),p(!0)},j=()=>{g({name:"",version:"",category:"LINUX",architecture:"X64",language:"en",url:"",size:0,description:"",icon:"",checksum:"",checksum_type:"sha256"}),C(null)},me=async()=>{M(!0);try{const t=await n.get(`${c}/admin/logs?limit=100`,i());J(t.data)}catch(t){console.error("Failed to fetch activity logs:",t)}finally{M(!1)}},A=async()=>{D(!0);try{const t=await n.get(`${c}/admin/settings`,i());ee(t.data),u(t.data)}catch(t){console.error("Failed to fetch settings:",t)}finally{D(!1)}},he=async()=>{var t,a;try{await n.post(`${c}/admin/settings`,d,i()),await A(),alert("Settings saved successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to save settings")}},ye=async t=>{var a,r;try{await n.post(`${c}/admin/maintenance/${t}`,{},i()),await A(),alert(`Maintenance mode ${t?"enabled":"disabled"}!`)}catch(o){alert(((r=(a=o.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to toggle maintenance mode")}},ue=t=>{if(t===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(a));return Math.round(t/Math.pow(a,o)*100)/100+" "+r[o]},pe=t=>{const a=Math.floor(t/86400),r=Math.floor(t%86400/3600),o=Math.floor(t%3600/60);return`${a}d ${r}h ${o}m`},$=t=>({windows:"ðŸªŸ",linux:"ðŸ§",macos:"ðŸŽ",bsd:"ðŸ˜ˆ",other:"ðŸ’¿"})[t.toLowerCase()]||"ðŸ’¿",f=t=>{B(t),t==="users"&&S.length===0&&w(),t==="isos"&&_.length===0&&(b(),O()),t==="logs"&&I.length===0&&me(),t==="settings"&&!Z&&A()};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’¿"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ISO Toolkit"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Admin Panel"})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto px-4 space-y-2",children:[e.jsxs("button",{onClick:()=>f("overview"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${h==="overview"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ“Š"}),e.jsx("span",{children:"Overview"})]}),e.jsxs("button",{onClick:()=>f("isos"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${h==="isos"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ’½"}),e.jsx("span",{children:"ISO Management"})]}),e.jsxs("button",{onClick:()=>f("users"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${h==="users"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ‘¥"}),e.jsx("span",{children:"Users"})]}),e.jsxs("button",{onClick:()=>f("settings"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${h==="settings"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"âš™ï¸"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:()=>f("logs"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${h==="logs"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ“œ"}),e.jsx("span",{children:"Activity Logs"})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Logged in as ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:x==null?void 0:x.username})]}),e.jsx("button",{onClick:z,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Logout"})]})]}),e.jsxs("div",{className:"flex-1 p-8",children:[h==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard Overview"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",x==null?void 0:x.username]})]}),v&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Downloads"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:v.total_downloads})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ“¥"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:v.active_downloads})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ”„"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Users"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:((E=m==null?void 0:m.users)==null?void 0:E.total)||0})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ‘¥"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total ISOs"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:(m==null?void 0:m.custom_isos_count)||0})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ’¿"})]})})]}),y&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"System Health"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Disk Usage"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.disk_free_gb.toFixed(1)," GB free"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${y.disk_usage_percent>90?"bg-red-500":y.disk_usage_percent>70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${y.disk_usage_percent}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Memory Usage"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.memory_usage_percent.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${y.memory_usage_percent>90?"bg-red-500":"bg-blue-500"}`,style:{width:`${y.memory_usage_percent}%`}})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"System Uptime"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:pe(y.uptime_seconds)})]})]})})]}),(m==null?void 0:m.recent_activity)&&m.recent_activity.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:m.recent_activity.slice(0,10).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.user," - ",t.action]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.timestamp).toLocaleString()})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.ip_address||"Unknown IP"})]},t.id))})})]})]}),h==="isos"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"ISO Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Add, edit, and remove ISO download links"})]}),e.jsx("button",{onClick:()=>{j(),p(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add New ISO"})]}),N&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total ISOs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:N.total_count})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Custom ISOs"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:N.custom_count})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Categories"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:Object.keys(N.by_category||{}).length})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>b(),className:"px-4 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"All"}),T.map(t=>e.jsxs("button",{onClick:()=>b(t),className:"px-4 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[$(t)," ",t]},t))]}),Y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k?"Edit ISO":"Add New ISO"}),e.jsx("button",{onClick:()=>{p(!1),j()},className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>g({...s,name:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version *"}),e.jsx("input",{type:"text",value:s.version,onChange:t=>g({...s,version:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),e.jsx("select",{value:s.category,onChange:t=>g({...s,category:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:T.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Architecture *"}),e.jsx("select",{value:s.architecture,onChange:t=>g({...s,architecture:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:fe.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language *"}),e.jsx("select",{value:s.language,onChange:t=>g({...s,language:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Ne.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Download URL *"}),e.jsx("input",{type:"url",value:s.url,onChange:t=>g({...s,url:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Size (bytes) *"}),e.jsx("input",{type:"number",value:s.size,onChange:t=>g({...s,size:parseInt(t.target.value)||0}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icon (emoji)"}),e.jsx("input",{type:"text",value:s.icon||"",onChange:t=>g({...s,icon:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ðŸ’¿"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Checksum"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:s.checksum||"",onChange:t=>g({...s,checksum:t.target.value}),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Checksum hash"}),e.jsx("select",{value:s.checksum_type||"sha256",onChange:t=>g({...s,checksum_type:t.target.value}),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:we.map(t=>e.jsx("option",{value:t,children:t.toUpperCase()},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description||"",onChange:t=>g({...s,description:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{p(!1),j()},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:k?oe:ce,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:k?"Update ISO":"Create ISO"})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:V?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading ISOs..."}):_.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No ISOs found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Version"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Arch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Size"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:t.icon||$(t.category)}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.version}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:[$(t.category)," ",t.category]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.architecture}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:ue(t.size)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_custom?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",children:"Override"}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:"Built-in"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>ge(t),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"Edit"}),t.is_custom&&e.jsx("button",{onClick:()=>xe(t.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:"Delete"})]})})]},t.id))})]})})})]}),h==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage users and permissions"})]}),e.jsx("button",{onClick:()=>{const t=prompt("Enter username:"),a=prompt("Enter email:"),r=prompt("Enter password (must be 8+ chars with uppercase, lowercase, and digit):"),o=confirm("Should this user be an admin?");t&&a&&r&&ne({username:t,email:a,password:r,is_admin:o})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add New User"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:q?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading users..."}):S.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No users found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:S.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:t.username[0].toUpperCase()}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.username})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_admin?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",children:"Admin"}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:"User"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_active?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:"Active"}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300",children:"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.last_login?new Date(t.last_login).toLocaleString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[t.id!==(x==null?void 0:x.id)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>le(t.id),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:t.is_admin?"Remove Admin":"Make Admin"}),e.jsx("button",{onClick:()=>ie(t.id,t.username),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:"Delete"})]}),t.id===(x==null?void 0:x.id)&&e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"Current"})]})})]},t.id))})]})})})]}),h==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"System Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Configure application settings"})]}),te?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading settings..."}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Site Name"}),e.jsx("input",{type:"text",value:d.site_name,onChange:t=>u({...d,site_name:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Site Description"}),e.jsx("input",{type:"text",value:d.site_description,onChange:t=>u({...d,site_description:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Download Size (GB)"}),e.jsx("input",{type:"number",value:d.max_download_size_gb,onChange:t=>u({...d,max_download_size_gb:parseInt(t.target.value)||100}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Download Timeout (seconds)"}),e.jsx("input",{type:"number",value:d.download_timeout_seconds,onChange:t=>u({...d,download_timeout_seconds:parseInt(t.target.value)||3600}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Allow Registration"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Allow new users to register"})]}),e.jsx("button",{onClick:()=>u({...d,allow_registration:!d.allow_registration}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.allow_registration?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.allow_registration?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Take the site offline for maintenance"})]}),e.jsx("button",{onClick:()=>u({...d,maintenance_mode:!d.maintenance_mode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.maintenance_mode?"bg-red-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.maintenance_mode?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>ye(!d.maintenance_mode),className:`px-4 py-2 rounded-lg transition-colors ${d.maintenance_mode?"bg-green-600 text-white hover:bg-green-700":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:d.maintenance_mode?"Disable Maintenance":"Enable Maintenance"}),e.jsx("button",{onClick:he,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Settings"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"System Actions"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:async()=>{var t,a;if(confirm("Create a backup of the database?"))try{await n.post(`${c}/admin/backup`,{},i()),alert("Backup created successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to create backup")}},className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-left hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’¾"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Create Backup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Backup the database"})]}),e.jsxs("button",{onClick:async()=>{var t,a;if(confirm("Clear the application cache?"))try{await n.post(`${c}/admin/clear-cache`,{},i()),alert("Cache cleared successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to clear cache")}},className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg text-left hover:bg-yellow-100 dark:hover:bg-yellow-900/30 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ§¹"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Clear Cache"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clear application cache"})]})]})})]})]}),h==="logs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Activity Logs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Audit trail of admin actions"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:Q?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading logs..."}):I.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No activity logs found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"IP Address"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:I.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:new Date(t.timestamp).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.user}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.action}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:JSON.stringify(t.details)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.ip_address||"-"})]},t.id))})]})})})]})]})]})}export{_e as default};
