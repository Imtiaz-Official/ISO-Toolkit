import{d as je,b as fe,r as d,a as n,j as e}from"./index-DPorbfpe.js";const c="/api",z=["WINDOWS","LINUX","MACOS","BSD","OTHER"],Ne=["X64","X86","ARM64","ARM","RISCV64","UNIVERSAL"],ve=["en","en-US","en-GB","de","fr","es","it","pt","ru","ja","ko","zh-CN"],we=["sha256","sha512","md5","sha1"],Se="access_token",R="admin_active_tab";function Ce(){var B;const{user:g,logout:H}=je(),L=fe(),[o,G]=d.useState(()=>{const t=localStorage.getItem(R);return t==="overview"||t==="isos"||t==="users"||t==="settings"||t==="logs"?t:"overview"}),[,X]=d.useState(!0);d.useEffect(()=>{localStorage.setItem(R,o)},[o]),d.useEffect(()=>{g&&!g.password_changed&&L("/admin/change-password",{replace:!0})},[g,L]);const[O,P]=d.useState(null),[y,K]=d.useState(null),[h,V]=d.useState(null),[v,q]=d.useState([]),[W,U]=d.useState(!1),[w,Y]=d.useState([]),[J,E]=d.useState(!1),[S,Q]=d.useState(null),[Z,b]=d.useState(!1),[k,A]=d.useState(null),[s,m]=d.useState({name:"",version:"",category:"LINUX",architecture:"X64",language:"en",url:"",size:0,description:"",icon:"",checksum:"",checksum_type:"sha256"}),[_,ee]=d.useState([]),[te,F]=d.useState(!1),[M,ae]=d.useState(null),[re,D]=d.useState(!1),[l,u]=d.useState({site_name:"ISO Toolkit",site_description:"Multi-OS ISO Downloader Toolkit",allow_registration:!0,max_download_size_gb:100,download_timeout_seconds:3600,maintenance_mode:!1}),i=()=>({headers:{Authorization:`Bearer ${localStorage.getItem(Se)}`}});d.useEffect(()=>{se()},[]),d.useEffect(()=>{o==="users"&&v.length===0&&j(),o==="isos"&&w.length===0&&(p(),C()),o==="logs"&&_.length===0&&T(),o==="settings"&&!M&&I()},[o]);const se=async()=>{await Promise.all([de(),le(),ie()]),X(!1)},de=async()=>{try{const t=await n.get(`${c}/analytics/detailed`,i());P(t.data)}catch(t){console.error("Failed to fetch analytics:",t)}},le=async()=>{try{const t=await n.get(`${c}/analytics/system-health`,i());K(t.data)}catch(t){console.error("Failed to fetch system health:",t)}},ie=async()=>{try{const t=await n.get(`${c}/admin/dashboard`,i());V(t.data)}catch(t){console.error("Failed to fetch dashboard overview:",t)}},j=async()=>{U(!0);try{const t=await n.get(`${c}/auth/admin/users`,i());q(t.data)}catch(t){console.error("Failed to fetch users:",t)}finally{U(!1)}},ne=async t=>{var a,r;try{await n.post(`${c}/auth/admin/users/${t}/toggle-admin`,{},i()),await j()}catch(x){alert(((r=(a=x.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to toggle admin status")}},ce=async(t,a)=>{var r,x;if(confirm(`Are you sure you want to delete user "${a}"?`))try{await n.delete(`${c}/auth/admin/users/${t}`,i()),await j()}catch(ke){alert(((x=(r=ke.response)==null?void 0:r.data)==null?void 0:x.detail)||"Failed to delete user")}},oe=async t=>{var a,r;try{await n.post(`${c}/auth/register`,t,i()),await j(),alert("User created successfully!")}catch(x){alert(((r=(a=x.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to create user")}},p=async t=>{E(!0);try{const a=await n.get(`${c}/admin/iso${t?`?category=${t}`:""}`,i());Y(a.data)}catch(a){console.error("Failed to fetch ISOs:",a)}finally{E(!1)}},C=async()=>{try{const t=await n.get(`${c}/admin/iso/stats`,i());Q(t.data)}catch(t){console.error("Failed to fetch ISO stats:",t)}},xe=async()=>{var t,a;try{await n.post(`${c}/admin/iso`,s,i()),b(!1),f(),await p(),await C(),alert("ISO created successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to create ISO")}},ge=async()=>{var t,a;if(k)try{await n.put(`${c}/admin/iso/${k.id}`,s,i()),b(!1),A(null),f(),await p(),alert("ISO updated successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to update ISO")}},me=async t=>{var a,r;if(confirm("Are you sure you want to delete this ISO?"))try{await n.delete(`${c}/admin/iso/${t}`,i()),await p(),await C(),alert("ISO deleted successfully!")}catch(x){alert(((r=(a=x.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to delete ISO")}},he=t=>{A(t),m({name:t.name,version:t.version,category:t.category,architecture:t.architecture,language:t.language,url:t.url,size:t.size,description:t.description,icon:t.icon,checksum:t.checksum,checksum_type:t.checksum_type}),b(!0)},f=()=>{m({name:"",version:"",category:"LINUX",architecture:"X64",language:"en",url:"",size:0,description:"",icon:"",checksum:"",checksum_type:"sha256"}),A(null)},T=async()=>{F(!0);try{const t=await n.get(`${c}/admin/logs?limit=100`,i());ee(t.data)}catch(t){console.error("Failed to fetch activity logs:",t)}finally{F(!1)}},I=async()=>{D(!0);try{const t=await n.get(`${c}/admin/settings`,i());ae(t.data),u(t.data)}catch(t){console.error("Failed to fetch settings:",t)}finally{D(!1)}},ye=async()=>{var t,a;try{await n.post(`${c}/admin/settings`,l,i()),await I(),alert("Settings saved successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to save settings")}},ue=async t=>{var a,r;try{await n.post(`${c}/admin/maintenance/${t}`,{},i()),await I(),alert(`Maintenance mode ${t?"enabled":"disabled"}!`)}catch(x){alert(((r=(a=x.response)==null?void 0:a.data)==null?void 0:r.detail)||"Failed to toggle maintenance mode")}},pe=t=>{if(t===0)return"0 Bytes";const a=1024,r=["Bytes","KB","MB","GB","TB"],x=Math.floor(Math.log(t)/Math.log(a));return Math.round(t/Math.pow(a,x)*100)/100+" "+r[x]},be=t=>{const a=Math.floor(t/86400),r=Math.floor(t%86400/3600),x=Math.floor(t%3600/60);return`${a}d ${r}h ${x}m`},$=t=>({windows:"ðŸªŸ",linux:"ðŸ§",macos:"ðŸŽ",bsd:"ðŸ˜ˆ",other:"ðŸ’¿"})[t.toLowerCase()]||"ðŸ’¿",N=t=>{G(t),t==="users"&&v.length===0&&j(),t==="isos"&&w.length===0&&(p(),C()),t==="logs"&&_.length===0&&T(),t==="settings"&&!M&&I()};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 flex flex-col",children:[e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’¿"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"ISO Toolkit"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Admin Panel"})]}),e.jsxs("nav",{className:"flex-1 overflow-y-auto px-4 space-y-2",children:[e.jsxs("button",{onClick:()=>N("overview"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${o==="overview"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ“Š"}),e.jsx("span",{children:"Overview"})]}),e.jsxs("button",{onClick:()=>N("isos"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${o==="isos"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ’½"}),e.jsx("span",{children:"ISO Management"})]}),e.jsxs("button",{onClick:()=>N("users"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${o==="users"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ‘¥"}),e.jsx("span",{children:"Users"})]}),e.jsxs("button",{onClick:()=>N("settings"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${o==="settings"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"âš™ï¸"}),e.jsx("span",{children:"Settings"})]}),e.jsxs("button",{onClick:()=>N("logs"),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${o==="logs"?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[e.jsx("span",{children:"ðŸ“œ"}),e.jsx("span",{children:"Activity Logs"})]})]}),e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Logged in as ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:g==null?void 0:g.username})]}),e.jsx("button",{onClick:H,className:"w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Logout"})]})]}),e.jsxs("div",{className:"flex-1 p-8",children:[o==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Dashboard Overview"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",g==null?void 0:g.username]})]}),O&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Downloads"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:O.total_downloads})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ“¥"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:O.active_downloads})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ”„"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Users"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:((B=h==null?void 0:h.users)==null?void 0:B.total)||0})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ‘¥"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total ISOs"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:(h==null?void 0:h.custom_isos_count)||0})]}),e.jsx("div",{className:"text-4xl",children:"ðŸ’¿"})]})})]}),y&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"System Health"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Disk Usage"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.disk_free_gb.toFixed(1)," GB free"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${y.disk_usage_percent>90?"bg-red-500":y.disk_usage_percent>70?"bg-yellow-500":"bg-green-500"}`,style:{width:`${y.disk_usage_percent}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Memory Usage"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.memory_usage_percent.toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${y.memory_usage_percent>90?"bg-red-500":"bg-blue-500"}`,style:{width:`${y.memory_usage_percent}%`}})})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"System Uptime"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white mt-1",children:be(y.uptime_seconds)})]})]})})]}),(h==null?void 0:h.recent_activity)&&h.recent_activity.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:h.recent_activity.slice(0,10).map(t=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.user," - ",t.action]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.timestamp).toLocaleString()})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.ip_address||"Unknown IP"})]},t.id))})})]})]}),o==="isos"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"ISO Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Add, edit, and remove ISO download links"})]}),e.jsx("button",{onClick:()=>{f(),b(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add New ISO"})]}),S&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total ISOs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mt-2",children:S.total_count})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Custom ISOs"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:S.custom_count})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Categories"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:Object.keys(S.by_category||{}).length})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>p(),className:"px-4 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"All"}),z.map(t=>e.jsxs("button",{onClick:()=>p(t),className:"px-4 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[$(t)," ",t]},t))]}),Z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:k?"Edit ISO":"Add New ISO"}),e.jsx("button",{onClick:()=>{b(!1),f()},className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:"âœ•"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Name *"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>m({...s,name:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Version *"}),e.jsx("input",{type:"text",value:s.version,onChange:t=>m({...s,version:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category *"}),e.jsx("select",{value:s.category,onChange:t=>m({...s,category:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:z.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Architecture *"}),e.jsx("select",{value:s.architecture,onChange:t=>m({...s,architecture:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:Ne.map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Language *"}),e.jsx("select",{value:s.language,onChange:t=>m({...s,language:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:ve.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Download URL *"}),e.jsx("input",{type:"url",value:s.url,onChange:t=>m({...s,url:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Size (bytes) *"}),e.jsx("input",{type:"number",value:s.size,onChange:t=>m({...s,size:parseInt(t.target.value)||0}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Icon (emoji)"}),e.jsx("input",{type:"text",value:s.icon||"",onChange:t=>m({...s,icon:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"ðŸ’¿"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Checksum"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:s.checksum||"",onChange:t=>m({...s,checksum:t.target.value}),className:"flex-1 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Checksum hash"}),e.jsx("select",{value:s.checksum_type||"sha256",onChange:t=>m({...s,checksum_type:t.target.value}),className:"px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:we.map(t=>e.jsx("option",{value:t,children:t.toUpperCase()},t))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description||"",onChange:t=>m({...s,description:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{onClick:()=>{b(!1),f()},className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:k?ge:xe,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:k?"Update ISO":"Create ISO"})]})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:J?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading ISOs..."}):w.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No ISOs found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Version"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Arch"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Size"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:w.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:t.icon||$(t.category)}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.version}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:[$(t.category)," ",t.category]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.architecture}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:pe(t.size)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_custom?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",children:"Override"}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:"Built-in"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>he(t),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:"Edit"}),t.is_custom&&e.jsx("button",{onClick:()=>me(t.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:"Delete"})]})})]},t.id))})]})})})]}),o==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"User Management"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage users and permissions"})]}),e.jsx("button",{onClick:()=>{const t=prompt("Enter username:"),a=prompt("Enter email:"),r=prompt("Enter password (must be 8+ chars with uppercase, lowercase, and digit):"),x=confirm("Should this user be an admin?");t&&a&&r&&oe({username:t,email:a,password:r,is_admin:x})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add New User"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:W?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading users..."}):v.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No users found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Last Login"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:v.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold",children:t.username[0].toUpperCase()}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.username})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_admin?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-300",children:"Admin"}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300",children:"User"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.is_active?e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300",children:"Active"}):e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300",children:"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.last_login?new Date(t.last_login).toLocaleString():"Never"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[t.id!==(g==null?void 0:g.id)&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ne(t.id),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300",children:t.is_admin?"Remove Admin":"Make Admin"}),e.jsx("button",{onClick:()=>ce(t.id,t.username),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300",children:"Delete"})]}),t.id===(g==null?void 0:g.id)&&e.jsx("span",{className:"text-gray-400 dark:text-gray-600",children:"Current"})]})})]},t.id))})]})})})]}),o==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"System Settings"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Configure application settings"})]}),re?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Loading settings..."}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Site Name"}),e.jsx("input",{type:"text",value:l.site_name,onChange:t=>u({...l,site_name:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Site Description"}),e.jsx("input",{type:"text",value:l.site_description,onChange:t=>u({...l,site_description:t.target.value}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Max Download Size (GB)"}),e.jsx("input",{type:"number",value:l.max_download_size_gb,onChange:t=>u({...l,max_download_size_gb:parseInt(t.target.value)||100}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Download Timeout (seconds)"}),e.jsx("input",{type:"number",value:l.download_timeout_seconds,onChange:t=>u({...l,download_timeout_seconds:parseInt(t.target.value)||3600}),className:"w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Allow Registration"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Allow new users to register"})]}),e.jsx("button",{onClick:()=>u({...l,allow_registration:!l.allow_registration}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.allow_registration?"bg-blue-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.allow_registration?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:"Maintenance Mode"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Take the site offline for maintenance"})]}),e.jsx("button",{onClick:()=>u({...l,maintenance_mode:!l.maintenance_mode}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.maintenance_mode?"bg-red-600":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${l.maintenance_mode?"translate-x-6":"translate-x-1"}`})})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:()=>ue(!l.maintenance_mode),className:`px-4 py-2 rounded-lg transition-colors ${l.maintenance_mode?"bg-green-600 text-white hover:bg-green-700":"bg-yellow-600 text-white hover:bg-yellow-700"}`,children:l.maintenance_mode?"Disable Maintenance":"Enable Maintenance"}),e.jsx("button",{onClick:ye,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Settings"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"System Actions"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("button",{onClick:async()=>{var t,a;if(confirm("Create a backup of the database?"))try{await n.post(`${c}/admin/backup`,{},i()),alert("Backup created successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to create backup")}},className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg text-left hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’¾"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Create Backup"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Backup the database"})]}),e.jsxs("button",{onClick:async()=>{var t,a;if(confirm("Clear the application cache?"))try{await n.post(`${c}/admin/clear-cache`,{},i()),alert("Cache cleared successfully!")}catch(r){alert(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.detail)||"Failed to clear cache")}},className:"p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg text-left hover:bg-yellow-100 dark:hover:bg-yellow-900/30 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ§¹"}),e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Clear Cache"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Clear application cache"})]})]})})]})]}),o==="logs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Activity Logs"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Audit trail of admin actions"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"overflow-x-auto",children:te?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading logs..."}):_.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No activity logs found"}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Timestamp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Action"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"IP Address"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:new Date(t.timestamp).toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.user}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.action}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-gray-400",children:JSON.stringify(t.details)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-400",children:t.ip_address||"-"})]},t.id))})]})})})]})]})]})}export{Ce as default};
